## US-015 Оракул: Работа оракула с неверным приватным ключом

**Описание**: Я, как администратор системы, где запущен оракул, могу быть уверен, что оракул автоматически начнет работать, как только соответствующий валидатор будет добавлен в контракт управления набором валидаторов, а до этого времени не будет тратить средства на отправку транзакций, которые будет отклонены в любом случае.

В тестах, перечисленных ниже, за исключением случаев, где это специально оговорено, считается, что 

1. Существуют две блокчейн сети:
    * Сеть `LEFT`:
      - максимальное количество газа, которое может быть потрачено транзакциями  в блоке `12'500'000`
      - время выпуска блоков в среднем раз в 5 секунд
      - контракт моста находится по адресу `0xfab1ed72a7236a6b34f47ee7Ed103d6CD448c441`
    * Сеть `RIGHT`:
      - максимальное количество газа, которое может быть потрачено транзакциями  в блоке `12'500'000`
      - время выпуска блоков в среднем раз в 5 секунд
      - контракт моста находится по адресу `0x159AE4d7012B18A0dE4e390714a6efa036487f0b`

2. Контракты моста зарегистрированы в блокчейн сетях при следующем содержимом переменных окружения:

    ```
    VALIDATORS=0x130930e3E3D30bF8F975a729e948CdCc212ECFBB 0x61365C58E44A6Fc166897f4A30641dba82E606c0
    THRESHOLD=1
    ```

3. Установлена ликвидность моста в 2000 токенов.

4. Запущен один оракул. В `PRIVKEY` `.env`-файла оракула указан свой приватный ключ, который соответствует адресу `0x130930e3E3D30bF8F975a729e948CdCc212ECFBB`. 

### AC-015-01 Смена валидатора во время работы оракула

1. Пользователь, чей приватный ключ соответствует адресу `0x5580ba66f8d6dc71adb0ca1d1c6b3d142ff7aaca` отправляет 1000 нативных токенов на адрес `0xfab1ed72a7236a6b34f47ee7Ed103d6CD448c441`. Транзакция входит в блок `B` и исполняется успешно. Баланс пользователя в сети `LEFT` уменьшается на 1000 токенов. Баланс моста увеличивается до 1000 токенов.
   
   В сети `RIGHT` в одном из блоков, выпущенном не позднее чем через 15 секунд после появления блока `B`, есть транзакция от аккаунта `0x130930e3E3D30bF8F975a729e948CdCc212ECFBB`. При опросе баланса пользователя `0x5580ba66f8d6dc71adb0ca1d1c6b3d142ff7aaca` в сети `RIGHT` на момент завершения блока, в который включена транзакция от оракула, видно, что на 1000 нативных токенов стало больше. При аналогичном запросе для баланса моста видно его уменьшение до 1000 нативных токенов.

2. Пользователь, чей приватный ключ соответствует адресу `0x5580ba66f8d6dc71adb0ca1d1c6b3d142ff7aaca` отправляет 10 нативных токенов на адрес `0x159AE4d7012B18A0dE4e390714a6efa036487f0b`. Транзакция входит в блок `B*` и исполняется успешно. Баланс пользователя в сети `RIGHT` уменьшается на 10 токенов. Баланс моста увеличивается на 10 токенов.
   
   В сети `LEFT` в одном из блоков, выпущенном не позднее чем через 15 секунд после появления блока `B*`, есть транзакция от аккаунта `0x130930e3E3D30bF8F975a729e948CdCc212ECFBB`. При опросе баланса пользователя `0x5580ba66f8d6dc71adb0ca1d1c6b3d142ff7aaca` в сети `LEFT` на момент завершения блока, в который включена транзакция от оракула, видно, что на 10 нативных токенов стало больше. При аналогичном запросе для баланса моста видно его уменьшение на 10 нативных токенов.

3. Администратор моста отправляет в сеть `LEFT` транзакцию, вызывающую метод `removeValidator` c параметром `("0x130930e3E3D30bF8F975a729e948CdCc212ECFBB")` в контракте управления набором валидаторов. Транзакция исполняется успешно.

4. Пользователь, чей приватный ключ соответствует адресу `0x666a479f910d0ca5418b00316b93cf5af6b6baa1` отправляет 27 нативных токенов на адрес `0x159AE4d7012B18A0dE4e390714a6efa036487f0b`. Транзакция входит в блок `B**` и исполняется успешно. Баланс пользователя в сети `RIGHT` уменьшается на 27 токенов. Баланс моста увеличивается на 27 токенов.

   В сети `LEFT` в последующих выпущенных блоках нет транзакции от аккаунта `0x130930e3E3D30bF8F975a729e948CdCc212ECFBB`. Изменения балансов пользователя `0x666a479f910d0ca5418b00316b93cf5af6b6baa1` и контрактов моста не происходит.

5. Пользователь, чей приватный ключ соответствует адресу `0x97bdb4071396b7f60b65e0eb62ce212a699f4b08` отправляет 42 нативных токена на адрес `0xfab1ed72a7236a6b34f47ee7Ed103d6CD448c441`. Транзакция входит в блок `B***` и исполняется успешно. Баланс пользователя в сети `LEFT` уменьшается на 42 токена. Баланс моста увеличивается на 42 токена.
   
   В сети `RIGHT` в одном из блоков, выпущенном не позднее чем через 15 секунд после появления блока `B****`, есть транзакция от аккаунта `0x130930e3E3D30bF8F975a729e948CdCc212ECFBB`. При опросе баланса пользователя `0x97bdb4071396b7f60b65e0eb62ce212a699f4b08` в сети `RIGHT` на момент завершения блока, в который включена транзакция от оракула, видно, что на 42 нативных токена стало больше. При аналогичном запросе для баланса моста видно его уменьшение на 42 нативных токена.

6. Администратор моста отправляет в сеть `RIGHT` транзакцию, вызывающую метод `removeValidator` c параметром `("0x130930e3E3D30bF8F975a729e948CdCc212ECFBB")` в контракте управления набором валидаторов. Транзакция исполняется успешно.

7. Пользователь, чей приватный ключ соответствует адресу `0xb54edc6dd623e5a50e8aa4e52ff906b63c9bd9cb` отправляет 15 нативных токенов на адрес `0xfab1ed72a7236a6b34f47ee7Ed103d6CD448c441`. Транзакция входит в блок `B***` и исполняется успешно. Баланс пользователя в сети `LEFT` уменьшается на 15 токенов. Баланс моста увеличивается на 15 токенов.

   В сети `RIGHT` в последующих выпущенных блоках нет транзакции от аккаунта `0x130930e3E3D30bF8F975a729e948CdCc212ECFBB`. Изменения балансов пользователя `0xb54edc6dd623e5a50e8aa4e52ff906b63c9bd9cb` и контрактов моста не происходит.

8. Администратор моста отправляет в сеть `LEFT` транзакцию, вызывающую метод `addValidator` c параметром `("0x130930e3E3D30bF8F975a729e948CdCc212ECFBB")` в контракте управления набором валидаторов. Транзакция исполняется успешно.

9. В сети `LEFT` в одном из блоков, выпущенном не позднее чем через 15 секунд после появления блока с тразнакцией исполняющей метод `addValidator`, есть транзакция от аккаунта `0x130930e3E3D30bF8F975a729e948CdCc212ECFBB`. При опросе баланса пользователя `0x666a479f910d0ca5418b00316b93cf5af6b6baa1` в сети `LEFT` на момент завершения блока, в который включена транзакция от оракула, видно, что на 27 нативных токенов стало больше. При аналогичном запросе для баланса моста видно его уменьшение на 27 нативных токенов.

10. Администратор моста отправляет в сеть `RIGHT` транзакцию, вызывающую метод `addValidator` c параметром `("0x130930e3E3D30bF8F975a729e948CdCc212ECFBB")` в контракте управления набором валидаторов. Транзакция исполняется успешно.

11. В сети `RIGHT` в одном из блоков, выпущенном не позднее чем через 15 секунд после появления блока с тразнакцией исполняющей метод `addValidator`, есть транзакция от аккаунта `0x130930e3E3D30bF8F975a729e948CdCc212ECFBB`. При опросе баланса пользователя `0xb54edc6dd623e5a50e8aa4e52ff906b63c9bd9cb` в сети `RIGHT` на момент завершения блока, в который включена транзакция от оракула, видно, что на 15 нативных токена стало больше. При аналогичном запросе для баланса моста видно его уменьшение на 15 нативных токена.