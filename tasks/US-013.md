## US-013 Оракул: пересылка события об отправленном токене на левую сторону

**Описание**: Я, как пользователь моста, могу инициировать посылку нативных токенов, послав их на адрес контракта моста на правой стороне, и после некоторого количества времени получить соответствующее количесво нативных токенов на левой стороне.

В тестах, перечисленных ниже, за исключением случаев, где это специально оговорено, считается, что 

1. Существуют две блокчейн сети:
    * Сеть `LEFT`:
      - максимальное количество газа, которое может быть потрачено транзакциями  в блоке `12'500'000`
      - время выпуска блоков в среднем раз в 5 секунд
      - контракт моста находится по адресу `0xfab1ed72a7236a6b34f47ee7Ed103d6CD448c441`
    * Сеть `RIGHT`:
      - максимальное количество газа, которое может быть потрачено транзакциями  в блоке `12'500'000`
      - время выпуска блоков в среднем раз в 5 секунд
      - контракт моста находится по адресу `0x159AE4d7012B18A0dE4e390714a6efa036487f0b`

2. Контракты моста зарегистрированы в блокчейн сетях при следующем содержимом переменных окружения:

    ```
    PRIVKEY=<private key corresponding to 0x79dD14623c4D33413c0c28fDAbC2285Fdb1e572e>
    VALIDATORS=0x130930e3E3D30bF8F975a729e948CdCc212ECFBB
    THRESHOLD=1
    ```

3. Установлена ликвидность моста в 100 токенов.


4. При содежимом файла `.env`:

    ```
    PRIVKEY=<private key corresponding to 0x130930e3E3D30bF8F975a729e948CdCc212ECFBB>
    LEFT_RPCURL=https://sokol.poa.network
    LEFT_ADDRESS=0xfab1ed72a7236a6b34f47ee7Ed103d6CD448c441
    LEFT_START_BLOCK=17290597
    LEFT_GASPRICE=5000000000
    RIGHT_RPCURL=https://data-seed-prebsc-1-s1.binance.org:8545/
    RIGHT_ADDRESS=0x159AE4d7012B18A0dE4e390714a6efa036487f0b
    RIGHT_START_BLOCK=5847797
    RIGHT_GASPRICE=10000000000
    ORACLE_DATA=/some/path
    ```
   и пустой директории `/some/path` запускается команда:

    ```
    $ docker-compose up -d
    ```

   При использовании `docker ps -a` видно, что, как минимум, один  контейнеры основывается на образе `n2n-oracle`.

### AC-013-01 Пересылка токенов

1. Пользователь, чей приватный ключ соответствует адресу `0x8bC8c4b73a6FcbA35e26817c9dbf86A85913Db33` отправляет 100 нативных токенов на адрес `0xfab1ed72a7236a6b34f47ee7Ed103d6CD448c441`. Транзакция входит в блок `B` и исполняется успешно. Баланс пользователя в сети `LEFT` уменьшается на 100 токенов. Через некоторое время баланс пользователя `0x8bC8c4b73a6FcbA35e26817c9dbf86A85913Db33` в сети `RIGHT` увеличивается на 100 нативных токенов.

2. Пользователь, чей приватный ключ соответствует адресу `0x5580ba66f8d6dc71adb0ca1d1c6b3d142ff7aaca` отправляет 10 нативных токенов на адрес `0x159AE4d7012B18A0dE4e390714a6efa036487f0b`. Транзакция входит в блок `B` и исполняется успешно. Баланс пользователя в сети `RIGHT` уменьшается на 10 токенов. Баланс моста увеличивается до 10 токенов.

3. В сети `LEFT` в одном из блоков `B*`, выпущенном не позднее чем через 15 секунд после появления блока `B`, есть транзакция от отправителя `0x130930e3E3D30bF8F975a729e948CdCc212ECFBB`. При опросе баланса пользователя `0x5580ba66f8d6dc71adb0ca1d1c6b3d142ff7aaca` в сети `LEFT` на момент завершения блока `B*` видно, что на 10 нативных токенов стало больше. При аналогичном запросе, баланс контракта моста -- 90 нативных токенов.

4. Пользователь, чей приватный ключ соответствует адресу `0x97bdb4071396b7f60b65e0eb62ce212a699f4b08` отправляет 15 нативных токенов на адрес `0x159AE4d7012B18A0dE4e390714a6efa036487f0b`. Транзакция входит в блок `B+n` и исполняется успешно. Баланс пользователя в сети `RIGHT` уменьшается на 15 токенов. Баланс моста увеличивается до 15 токенов.

5. В сети `LEFT` в одном из блоков `B**`, выпущенном не позднее чем через 15 секунд после появления блока `B+n`, есть транзакция от отправителя `0x130930e3E3D30bF8F975a729e948CdCc212ECFBB`. При опросе баланса пользователя `0x97bdb4071396b7f60b65e0eb62ce212a699f4b08` в сети `LEFT` на момент завершения блока `B**` видно, что на 15 нативных токенов стало больше. При аналогичном запросе, баланс контракта моста -- 75 нативных токенов.

6. Пользователь, чей приватный ключ соответствует адресу `0x5580ba66f8d6dc71adb0ca1d1c6b3d142ff7aaca` отправляет 20 нативных токенов на адрес `0x159AE4d7012B18A0dE4e390714a6efa036487f0b`. Транзакция входит в блок `B+n+m` и исполняется успешно. Баланс пользователя в сети `RIGHT` уменьшается на 20 токенов. Баланс моста увеличивается до 45 токенов.

7. В сети `LEFT` в одном из блоков `B***`, выпущенном не позднее чем через 15 секунд после появления блока `B+n+m`, есть транзакция от отправителя `0x130930e3E3D30bF8F975a729e948CdCc212ECFBB`. При опросе баланса пользователя `0x5580ba66f8d6dc71adb0ca1d1c6b3d142ff7aaca` в сети `LEFT` на момент завершения блока `B***` видно, что на 20 нативных токенов стало больше. При аналогичном запросе, баланс контракта моста -- 55 нативных токенов.
