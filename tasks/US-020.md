## US-020 CLI: ручная пересылка пользователем собранных подтверждений в левую сторону

**Описание**: Я, как пользователь моста, при контрактах моста переключенных в режим экономичной пересылки могу с помощью специальной CLI комагды самостоятельно переслать в левую часть моста подтверждения от валидаторов, собранные в правой стороне. Такая возможность необходима на случай, когда валидаторы не имеют средств на оплату комиссий для транзакций блокченй сети на левой стороне моста.

В тестах, перечисленных ниже, за исключением случаев, где это специально оговорено, считается, что 

1. Существуют две блокчейн сети:
    * Сеть `LEFT`:
      - максимальное количество газа, которое может быть потрачено транзакциями  в блоке `12'500'000`
      - время выпуска блоков в среднем раз в 5 секунд
      - контракт моста находится по адресу `0xfab1ed72a7236a6b34f47ee7Ed103d6CD448c441`
    * Сеть `RIGHT`:
      - максимальное количество газа, которое может быть потрачено транзакциями  в блоке `12'500'000`
      - время выпуска блоков в среднем раз в 5 секунд
      - контракт моста находится по адресу `0x159AE4d7012B18A0dE4e390714a6efa036487f0b`

2. Контракты моста зарегистрированы в блокчейн сетях при следующем содержимом переменных окружения:

    ```
    VALIDATORS=0x226Dbd003697a5Ab7A501ED6fc02Bda096C66E70 0x130930e3E3D30bF8F975a729e948CdCc212ECFBB 0x61365C58E44A6Fc166897f4A30641dba82E606c0
    THRESHOLD=2
    ```

3. Установлена ликвидность моста в 1000 токенов. 

4. На двух сторонах моста выполнена команда `enableRobustMode`.

4. Запущены три оракула. В `PRIVKEY` `.env`-файла каждого оракула указан свой собственный приватный ключ, который соответствует одному из адресов, перечисленных в `VALIDATORS` при регистрации контрактов моста. Порядок запуска оракулов не определен. Промежутки времени между запусками оракулов не определены. 

5. У всех валидаторов моста отсутствует средства на балансах в блокчейн сети `LEFT`.

### AC-020-01 Пересылка подтверждения на левую сторону

1. Пользователь, чей приватный ключ соответствует адресу `0x5580ba66f8d6dc71adb0ca1d1c6b3d142ff7aaca` отправляет 1000 нативных токенов на адрес `0xfab1ed72a7236a6b34f47ee7Ed103d6CD448c441`. Транзакция входит в блок `B` и исполняется успешно. Баланс пользователя в сети `LEFT` уменьшается на 1000 токенов. Баланс моста увеличивается до 1000 токенов.
   
   В сети `RIGHT` в одном или нескольких блоках, выпущенном не позднее чем через 15 секунд после появления блока `B`, есть транзакции от двух или трех оракулов. При опросе баланса пользователя `0x5580ba66f8d6dc71adb0ca1d1c6b3d142ff7aaca` в сети `RIGHT` на момент завершения блока, в который включена последняя успешная транзакция от оракулов, видно, что на 1000 нативных токенов стало больше. При аналогичном запросе для баланса моста видно его уменьшение до 0 нативных токенов.

2. Пользователь, чей приватный ключ соответствует адресу `0xF91296B9d7699d800c2Ba0a80e755972a9DA7C34` отправляет 10 нативных токенов на адрес `0x159AE4d7012B18A0dE4e390714a6efa036487f0b`. Транзакция `0xac21bd9c034f02266f79ac064560ea1ed3e8b8ff6491f0f8e433e9122ae4e804` входит в блок `B*` и исполняется успешно. Баланс пользователя в сети `RIGHT` уменьшается на 10 токенов. Баланс моста увеличивается на 10 токенов.
   
   В сети `LEFT` ни в одном из блоков, выпущенном после появления блока `B*`, нет транзакций от оракулов. Баланс пользователя `0xF91296B9d7699d800c2Ba0a80e755972a9DA7C34` в сети `LEFT` не изменился.

3. В директории `/some/path` находится `.env` файл со следующим содержимым:

    ```
    PRIVKEY=<private key corresponding to 0xF91296B9d7699d800c2Ba0a80e755972a9DA7C34>
    LEFT_RPCURL=https://sokol.poa.network
    LEFT_ADDRESS=0xfab1ed72a7236a6b34f47ee7Ed103d6CD448c441
    LEFT_GASPRICE=5000000000
    RIGHT_RPCURL=https://data-seed-prebsc-1-s1.binance.org:8545/
    RIGHT_ADDRESS=0x159AE4d7012B18A0dE4e390714a6efa036487f0b
    ```

4. После запуска команды:
    ```
    $ docker run -ti --rm --env-file /some/path/.env n2n-oracle \
        /tools/applyCommits.py \
        0xac21bd9c034f02266f79ac064560ea1ed3e8b8ff6491f0f8e433e9122ae4e804
    ```
   в терминале выводится 
    ```
    0x930650054b50608dafb24c08b71f46bf8605de83d9ad5502cad0c6159dd074bf executed
    ```

   При опросе баланса пользователя `0xF91296B9d7699d800c2Ba0a80e755972a9DA7C34` в сети `LEFT` на момент завершения блока, в который включена транзакция `0x930650054b50608dafb24c08b71f46bf8605de83d9ad5502cad0c6159dd074bf`, видно, что на 10 нативных токенов стало больше. При аналогичном запросе для баланса моста видно его уменьшение на 10 нативных токенов.
