Задача "Мост для перевода средств между двумя блокчейн сетями""
====

Описание командной задачи финала профиля "Программная инженерия финансовых технологий" ОКДНТИ 2020/2021.

## Высокоуровневое описание задачи

Как и любая база данных, блокчейн система имеет ограничения -- ограничения на скорость обработки транзакций, на количество информации, которое может храниться и обрабатываться одним узлом-участником в блокчейн сети. К тому же, в публичных блокчейн сетях, где пользователю необходимо платить за транзакции, эти ограничения выливаются в увеличение стоимости транзакции.

Это называется проблемой масштабирования (scalability) -- при увеличении количества обрабатываемой информации система должна позволять органически изменять свои свойства, чтобы системой могли продолжать пользоваться. При этом, очевидно, что в самом начале система (при маленьком количестве обрабатываемой информации) не должна быть избыточна, поскольку это удорожает ее поддержку на ранних стадиях.

Одним из решением проблем масштабирования в блокчейн системах является организация дополнительных блокчейн сетей. Каждая сеть может обслуживать конкретный проект или группу пользователей. Например, может быть отдельная сеть для децентрализованной биржи, отдельная сеть для IoT устройств, отдельная сеть для голосования и т.п. При этом между сетями выстраиваются каналы межблокчейнового взаимодействия, позволяющие передавть информацию из одной блокчейн системы в другую. Таким образом, формируется сеть блокчейн систем. 

Каналы межблокчейнового взаимодействия могут быть выстроены следующим образом:

1. [Атомарный обмен (atomic swap, hashed timelock contracts)](https://www.investopedia.com/terms/h/hashed-timelock-contract.asp) применяется исключительно для обмена денежными средствами и осуществляется через контракты. Два пользователя должны предварительно договориться о сумме обмена, затем один из них (Alice) регистрирует в одной блокчейн сети контракт (`С1`), содержащий захешированное значение секретного ключа, и помещает договоренную сумму на счет данного контракта. Другой пользователь (Bob) полностью копирует данный контракт (а значит и хэш секретного ключа), регистрирует его (`C2`) в другой блокчейн сети и помещает договоренную сумму на счет этого контракта. Теперь Alice может обратиться к контракту `C2` для получения суммы обмена, но должна для этого предъявить контракту секретный ключ. Как только контракт исполняется, ключ становится извесен Bob, что позволяет ему забрать средства с контракта `C1`.

2. Мост, собранный по нотариальной схеме (federated notaries), позволяет передавать, в отличие от atomic swap, любую информацию между двумя блокчейн сетями. В основе моста лежит оракул -- сущность, следящая за изменением состояния одной блокчейн системы в результате обработки транзакций, и доставляющая информацию об изменении в другую блокчейн систему. Продолжая аналогию с мостом, можно эти две разные блокчейн системы назвать сторонами моста. Следовательно, суть оракула -- передать информации с одной стороны моста на другую сторону. Для увеличения надежности и уменьшения возможности цензурирования используют несколько независимых оракулов. Тогда переданная информация считается достоверной, если ее подтвердят несколько оракулов. Например, если всего оракулов 5, то передача информации достоверна при наличии трех подтверждений. 

3. Релейный мост также позволяет передавать любую информацию между двумя блокчейн системами. При этом является более децентрализованным, чем мост с нотариальной схемой. Но сложность в разработке является существенным недостатком данного моста. По факту, данное решение требует реализации легких клиентов (light clients) в виде контрактов, которые опираясь на информацию, хранимую в заголовке блока, и предоставляемое доказательство наличия искомой информации в теле блока, позволяли бы оперировать самой информацией. При этом релееры (relays) ответственны за перенос заголовков блоков одной блокчейн сети в другую, за счет чего и происходит передача событий из одного блокчейна в другой: блокчейн `N1` содержит заголовки блоков блокчейна `N2`, что позволяет любому пользователю блокчейна `N1`, предъявив доказательство (Merkle Proof) наличия события в блоке из `N2`, иницировать обработку этого события в блокчейн `N1`.

В финальной задаче сезона 2020/21 годов предлагается разработать простейший федеративный мост (пункт 2 в списке выше) для передачи токенов между двумя блокчейн сетями.

Для простоты мост будет работать только с нативными токенами - "техническими" токенами блокчейн сети, используемыми для оплаты комиссий (например, _ether_ для Ethereum Mainnet или _SPOA_ для тестовой сети Sokol).

Тогда типовой сценарий взаимодействия с мостом будет следующий: 
  1. Alice посылает токены на контракт моста в одной блокчейн сети (назовем ее "левая" сторона моста). При этом транзакция, посылающая токены, генерирует определенное событие.
  2. Каждый из оракулов моста независимо от других оракулов мониторит появление события в сети, находящейся на "левой" стороне, и, как только событи обнаружено, посылает подтверждение в контракт моста в блокчейне, находящемся на "правой" стороне.
  3. Как только контракт моста собирает достаточное количество подтверждений, то он пересылает соответствующее количество токенов Alice.

В итоге, у Alice создается впечатление, что она послал токены в одной блокчейн сети, а получила их в другой.