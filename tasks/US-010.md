## US-010 Контракт моста: отправка токенов на контракт на правой стороне

**Описание**: Я, как пользователь моста, могу инициировать посылку нативных токенов из правой стороны моста в левую сторону, послав их на адрес контракта моста.

### AC-010-01 Запрос посылки токенов

1. Контракт моста зарегистрирован в блокчейн сети с правой стороны по адресу `0x33E0E07cA86c869adE3fc9DE9126f6C73DAD105e` при следующем содержимом переменных окружения:

    ```
    VALIDATORS=0x130930e3E3D30bF8F975a729e948CdCc212ECFBB
    THRESHOLD=1
    ```

2. Пользователь, чей приватный ключ соответствует адресу `0x79dD14623c4D33413c0c28fDAbC2285Fdb1e572e` вызывает JSON RPC метод `eth_estimateGas` для оценки потребления газа перед посылкой транзакции на пересылку 5 нативных токенов. Вызов `eth_estimateGas` возвращает ошибку, сообщающую о том, что в ходе вызова метода контракта выполнилась команда `revert`.

3. Администратор моста инициирует контракт моста, отправив транзакцию, вызывающую метод `addLiquidity`. Данная транзакция также пересылает 200 нативных токенов. Баланс моста увеличивается до 200 токенов.

4. Вызов метода `getLiquidityLimit` возвращает: `200000000000000000000`.

5. Пользователь, чей приватный ключ соответствует адресу `0x79dD14623c4D33413c0c28fDAbC2285Fdb1e572e` вызывает JSON RPC метод `eth_estimateGas` для оценки потребления газа перед посылкой транзакции на пересылку 5 нативных токенов. Вызов `eth_estimateGas` возвращает ошибку, сообщающую о том, что в ходе вызова метода контракта выполнилась команда `revert`.

6. Аккаунт с адресом `0x130930e3E3D30bF8F975a729e948CdCc212ECFBB` отправляет транзакцию на контракт `0x33E0E07cA86c869adE3fc9DE9126f6C73DAD105e`, вызывающую метод `commit` с параметром `("0xf712a82DD8e2Ac923299193e9d6dAEda2d5a32fd", 100000000000000000000, "0xddfbb81ca5f813ff658bc60df9d23a464cec78966b90d98aa9c09ce4045bb285")`. Транзакция исполняется успешно. У пользователя `0xf712a82DD8e2Ac923299193e9d6dAEda2d5a32fd` после исполнения транзакции становится на 100 нативных токенов больше. Баланс контракта моста меняется до 100 нативных токенов.

7. Вызов метода `getLiquidityLimit` возвращает: `100000000000000000000`.

8. Пользователь, чей приватный ключ соответствует адресу `0x79dD14623c4D33413c0c28fDAbC2285Fdb1e572e` отправляет 5 нативных токенов на адрес контракта моста. Транзакция исполняется успешно. Баланс пользователя уменьшается на 5 токенов. Баланс моста увеличивается до 105 токенов. В выписке транзакции есть событие:
    * `bridgeActionInitiated("0x79dD14623c4D33413c0c28fDAbC2285Fdb1e572e", 5000000000000000000)`

9. Вызов метода `getLiquidityLimit` возвращает: `105000000000000000000`.

10. Пользователь, чей приватный ключ соответствует адресу `0xf712a82DD8e2Ac923299193e9d6dAEda2d5a32fd` отправляет 10 нативных токенов на адрес контракта моста. Транзакция исполняется успешно. Баланс пользователя уменьшается на 10 токенов. Баланс моста увеличивается до 115 токенов. В выписке транзакции есть событие:
    * `bridgeActionInitiated("0xf712a82DD8e2Ac923299193e9d6dAEda2d5a32fd", 10000000000000000000)`

11. Вызов метода `getLiquidityLimit` возвращает: `115000000000000000000`.

12. Пользователь, чей приватный ключ соответствует адресу `0xf712a82DD8e2Ac923299193e9d6dAEda2d5a32fd` отправляет 15 нативных токенов на адрес контракта моста. Транзакция исполняется успешно. Баланс пользователя уменьшается на 15 токенов. Баланс моста увеличивается до 130 токенов. В выписке транзакции есть событие:
    * `bridgeActionInitiated("0xf712a82DD8e2Ac923299193e9d6dAEda2d5a32fd", 15000000000000000000)`

13. Вызов метода `getLiquidityLimit` возвращает: `130000000000000000000`.

14. Пользователь, чей приватный ключ соответствует адресу `0xf712a82DD8e2Ac923299193e9d6dAEda2d5a32fd` вызывает JSON RPC метод `eth_estimateGas` для оценки потребления газа перед посылкой транзакции на пересылку 75 нативных токенов. Вызов `eth_estimateGas` возвращает ошибку, сообщающую о том, что в ходе вызова метода контракта выполнилась команда `revert`.

15. Аккаунт с адресом `0x130930e3E3D30bF8F975a729e948CdCc212ECFBB` отправляет транзакцию на контракт `0x33E0E07cA86c869adE3fc9DE9126f6C73DAD105e`, вызывающую метод `commit` с параметром `("0x79dD14623c4D33413c0c28fDAbC2285Fdb1e572e", 50000000000000000000, "0xc05af7a8256ab341d0f51a464e9d84dbde0efeb1f36b48ae815f179410e7a04e")`. Транзакция исполняется успешно. У пользователя `0x79dD14623c4D33413c0c28fDAbC2285Fdb1e572e` после исполнения транзакции становится на 50 нативных токенов больше. Баланс контракта моста меняется до 80 нативных токенов.

16. Вызов метода `getLiquidityLimit` возвращает: `80000000000000000000`.

17. Пользователь, чей приватный ключ соответствует адресу `0xf712a82DD8e2Ac923299193e9d6dAEda2d5a32fd` отправляет 75 нативных токенов на адрес контракта моста. Транзакция исполняется успешно. Баланс пользователя уменьшается на 75 токенов. Баланс моста увеличивается до 155 токенов. В выписке транзакции есть событие:
    * `bridgeActionInitiated("0xf712a82DD8e2Ac923299193e9d6dAEda2d5a32fd", 75000000000000000000)`

18. Вызов метода `getLiquidityLimit` возвращает: `155000000000000000000`.

19. Пользователь, чей приватный ключ соответствует адресу `0xf712a82DD8e2Ac923299193e9d6dAEda2d5a32fd` вызывает JSON RPC метод `eth_estimateGas` для оценки потребления газа перед посылкой транзакции на пересылку 0 нативных токенов. Вызов `eth_estimateGas` возвращает ошибку, сообщающую о том, что в ходе вызова метода контракта выполнилась команда `revert`.
